<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–°ç”Ÿå¯¦ç¿’é«”æª¢æ™ºèƒ½å°èˆª</title>
    
    <!-- å¼•å…¥ React èˆ‡ ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- å¼•å…¥ Babel ç”¨æ–¼è§£æ JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* ç°¡å–®çš„å‹•ç•«æ¨£å¼ */
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        .animate-in {
            animation: fadeIn 0.2s ease-out forwards;
        }
    </style>
</head>
<body class="bg-slate-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // --- Icons Components (ç”±æ–¼æ˜¯å–®ä¸€æª”æ¡ˆï¼Œæˆ‘å€‘å°‡ Icon ç›´æ¥å¯«åœ¨é€™é‚Š) ---
        const IconBase = ({ children, className, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>
                {children}
            </svg>
        );

        const Shield = (props) => <IconBase {...props}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" /></IconBase>;
        const Activity = (props) => <IconBase {...props}><polyline points="22 12 18 12 15 21 9 3 6 12 2 12" /></IconBase>;
        const FileText = (props) => <IconBase {...props}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z" /><polyline points="14 2 14 8 20 8" /></IconBase>;
        const Syringe = (props) => <IconBase {...props}><path d="m18 2 4 4" /><path d="m17 7 3-3" /><path d="M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5" /><path d="m9 11 4 4" /><path d="m5 19-3 3" /><path d="m14 4 6 6" /></IconBase>;
        const CheckCircle = (props) => <IconBase {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" /><polyline points="22 4 12 14.01 9 11.01" /></IconBase>;
        const AlertCircle = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10" /><line x1="12" y1="8" x2="12" y2="12" /><line x1="12" y1="16" x2="12.01" y2="16" /></IconBase>;
        const HelpCircle = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10" /><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" /><line x1="12" y1="17" x2="12.01" y2="17" /></IconBase>;
        const ChevronRight = (props) => <IconBase {...props}><polyline points="9 18 15 12 9 6" /></IconBase>;
        const RefreshCcw = (props) => <IconBase {...props}><path d="M3 2v6h6" /><path d="M21 12A9 9 0 0 0 6 5.3L3 8" /><path d="M21 22v-6h-6" /><path d="M3 12a9 9 0 0 0 15 6.7l3-2.7" /></IconBase>;
        const Info = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10" /><line x1="12" y1="16" x2="12" y2="12" /><line x1="12" y1="8" x2="12.01" y2="8" /></IconBase>;
        const Thermometer = (props) => <IconBase {...props}><path d="M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z" /></IconBase>;
        const Baby = (props) => <IconBase {...props}><path d="M9 12h.01" /><path d="M15 12h.01" /><path d="M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5" /><path d="M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.8 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.8A9 9 0 0 1 19 6.3z" /></IconBase>;
        const QrCode = (props) => <IconBase {...props}><rect x="3" y="3" width="7" height="7" /><rect x="14" y="3" width="7" height="7" /><rect x="14" y="14" width="7" height="7" /><path d="M3 14h7v7H3z" /></IconBase>;

        // --- Main Component ---
        const HealthCheckGuide = () => {
            const [currentStep, setCurrentStep] = useState('home');
            const [results, setResults] = useState({});
            const [activeCategory, setActiveCategory] = useState(null);
            const [interaction, setInteraction] = useState(null);

            // å®šç¾©é«”æª¢é …ç›®çš„é‚è¼¯æ¨¹
            const categories = [
                {
                    id: 'hepb',
                    title: '1. Bå‹è‚ç‚ (Hepatitis B)',
                    icon: <Activity className="w-6 h-6 text-blue-600" />,
                    description: 'è¦å®šï¼šéœ€æª¢é©—è¡¨é¢æŠ—åŸèˆ‡æŠ—é«”ã€‚è‹¥çš†ç‚ºé™°æ€§ï¼Œæ‡‰æ¥ç¨®ç–«è‹—ä¸¦æª¢é™„è­‰æ˜ã€‚',
                    color: 'bg-blue-50 border-blue-200',
                    logic: [
                        {
                            id: 'q1',
                            text: 'è«‹å•æ‚¨çš„ Bå‹è‚ç‚æª¢é©—å ±å‘Šçµæœç‚ºä½•ï¼Ÿ',
                            subtext: 'éœ€åŒ…å« HBsAg (æŠ—åŸ) èˆ‡ Anti-HBs (æŠ—é«”)',
                            options: [
                                { label: 'æŠ—é«” (Anti-HBs) ç‚ºé™½æ€§ (+)', next: 'result_pass', type: 'success' },
                                { label: 'æŠ—åŸèˆ‡æŠ—é«”ã€Œçš†ç‚ºé™°æ€§ (-)ã€', next: 'result_action_vax', type: 'warning' },
                                { label: 'æŠ—åŸ (HBsAg) ç‚ºé™½æ€§ (+)', next: 'result_carrier', type: 'warning' },
                                { label: 'æˆ‘é‚„æ²’æœ‰æª¢é©—å ±å‘Š', next: 'result_check', type: 'neutral' }
                            ]
                        }
                    ],
                    outcomes: {
                        result_pass: {
                            status: 'pass',
                            title: 'âœ… ç¬¦åˆè¦å®š',
                            desc: 'è«‹å½±å°è©²ä»½æª¢é©—å ±å‘Š (æŠ—é«”é™½æ€§) ç¹³äº¤ã€‚'
                        },
                        result_action_vax: {
                            status: 'action',
                            title: 'ğŸ’‰ éœ€æ‰“ç–«è‹—ä¸¦å›æ¸¬æŠ—é«”',
                            desc: 'å› æŠ—åŸèˆ‡æŠ—é«”çš†ç‚ºé™°æ€§ï¼Œä¾è¦å®šæ‡‰æ¥å— B å‹è‚ç‚ç–«è‹—æ³¨å°„ã€‚è«‹æ–¼ã€Œå®Œæˆç–«è‹—æ³¨å°„ 1 å€‹æœˆå¾Œã€ï¼Œéœ€æŠ½è¡€æª¢é©— B è‚æŠ—é«”ï¼Œä¸¦ä¸€ä½µç¹³äº¤ã€Œç–«è‹—æ–½æ‰“è­‰æ˜ã€èˆ‡ã€ŒæŠ—é«”æª¢é©—å ±å‘Šã€ã€‚'
                        },
                        result_carrier: {
                            status: 'pass',
                            title: 'âœ… è«‹ç¹³äº¤æª¢é©—å ±å‘Š',
                            desc: 'æ‚¨ç‚º B è‚å¸¶åŸè€… (æŠ—åŸé™½æ€§)ï¼Œè«‹ç›´æ¥å½±å°ä¸¦ç¹³äº¤è©²ä»½æª¢é©—å ±å‘Šå³å¯ã€‚'
                        },
                        result_check: {
                            status: 'test',
                            title: 'ğŸ©¸ éœ€æä¾›é†«é™¢æŠ½è¡€å ±å‘Š',
                            desc: 'è«‹è‡³é†«é™¢é€²è¡ŒæŠ½è¡€æª¢é©—ï¼Œå ±å‘Šéœ€åŒ…å«ã€ŒBå‹è‚ç‚è¡¨é¢æŠ—åŸã€èˆ‡ã€ŒBå‹è‚ç‚è¡¨é¢æŠ—é«”ã€ï¼Œä¸¦ç¹³äº¤è©²ä»½å ±å‘Šã€‚'
                        }
                    }
                },
                {
                    id: 'chickenpox',
                    title: '2. æ°´ç—˜ (Varicella)',
                    icon: <CheckCircle className="w-6 h-6 text-teal-600" />,
                    description: 'è¦å®šï¼šæ°´ç—˜æª¢é©— (æŠ—é«”) æˆ–æ˜¯ æ¥ç¨®ç´€éŒ„ã€‚',
                    color: 'bg-teal-50 border-teal-200',
                    logic: [
                        {
                            id: 'q1',
                            text: 'è«‹å•æ‚¨æ˜¯å¦æœ‰æ°´ç—˜çš„ã€Œæª¢é©—å ±å‘Šã€æˆ–ã€Œæ¥ç¨®ç´€éŒ„ã€ï¼Ÿ',
                            subtext: 'å…©è€…æ“‡ä¸€å³å¯',
                            options: [
                                { label: 'æœ‰ï¼Œæˆ‘æœ‰æŠ—é«”é™½æ€§å ±å‘Š', next: 'result_pass_antibody', type: 'success' },
                                { label: 'æœ‰ï¼Œæˆ‘æœ‰ç–«è‹—æ¥ç¨®ç´€éŒ„', next: 'result_pass_vax', type: 'success' },
                                { label: 'éƒ½æ²’æœ‰ / æŠ—é«”é™°æ€§', next: 'result_action', type: 'warning' }
                            ]
                        }
                    ],
                    outcomes: {
                        result_pass_antibody: {
                            status: 'pass',
                            title: 'âœ… ç¬¦åˆè¦å®š (æ†‘æª¢é©—)',
                            desc: 'è«‹ç¹³äº¤æ°´ç—˜æŠ—é«”æª¢é©—å ±å‘Š (é™½æ€§)ã€‚'
                        },
                        result_pass_vax: {
                            status: 'pass',
                            title: 'âœ… ç¬¦åˆè¦å®š (æ†‘ç´€éŒ„)',
                            desc: 'è«‹ç¹³äº¤æ°´ç—˜ç–«è‹—æ¥ç¨®ç´€éŒ„å½±æœ¬ (å¦‚é»ƒå¡)ã€‚'
                        },
                        result_action: {
                            status: 'action',
                            title: 'ğŸ’‰ éœ€å®Œæˆå…©åŠ‘ç–«è‹—æ¥ç¨®',
                            desc: 'è‹¥ç„¡æŠ—é«”è³‡æ–™æˆ–æŠ—é«”ç‚ºé™°æ€§ï¼Œè«‹å‹™å¿…è‡³é†«é™¢ã€Œå®Œæˆå…©åŠ‘æ°´ç—˜ç–«è‹—æ³¨å°„ã€ä¸¦ç¹³äº¤è­‰æ˜ã€‚æ³¨æ„ï¼šå®Œæˆç–«è‹—æ¥ç¨®å¾Œï¼Œä¸é ˆå†æŠ½è¡€æª¢é©—æŠ—é«”ã€‚'
                        }
                    }
                },
                {
                    id: 'mmr',
                    title: '3. éº»ç–¹ã€è…®è…ºç‚ã€å¾·åœ‹éº»ç–¹ (MMR)',
                    icon: <Shield className="w-6 h-6 text-rose-600" />,
                    description: 'è¦å®šï¼šæŠ—é«”é™½æ€§è­‰æ˜ æˆ– å®Œæˆ MMR ç–«è‹—æ¥ç¨®ã€‚',
                    color: 'bg-rose-50 border-rose-200',
                    logic: [
                        {
                            id: 'q1',
                            text: 'è«‹å•æ‚¨æ˜¯å¦æœ‰ MMR çš„ã€ŒæŠ—é«”é™½æ€§è­‰æ˜ã€ï¼Ÿ',
                            subtext: 'éº»ç–¹ã€è…®è…ºç‚ã€å¾·åœ‹éº»ç–¹æŠ—é«”',
                            options: [
                                { label: 'æœ‰ï¼Œæˆ‘æœ‰æŠ—é«”é™½æ€§å ±å‘Š', next: 'result_pass_antibody', type: 'success' },
                                { label: 'æ²’æœ‰ / ä¸ç¢ºå®š', next: 'q2', type: 'neutral' }
                            ]
                        },
                        {
                            id: 'q2',
                            text: 'é‚£æ‚¨æ˜¯å¦æœ‰å®Œæˆ MMR ç–«è‹—çš„ã€Œæ¥ç¨®ç´€éŒ„ã€ï¼Ÿ',
                            subtext: 'é€šå¸¸è¨˜è¼‰æ–¼é»ƒå¡ï¼Œéœ€å®Œæ•´æ¥ç¨®',
                            options: [
                                { label: 'æœ‰ï¼Œæˆ‘æœ‰ç–«è‹—æ¥ç¨®ç´€éŒ„', next: 'result_pass_vax', type: 'success' },
                                { label: 'æ²’æœ‰ç´€éŒ„ / æ‰¾ä¸åˆ°', next: 'result_action', type: 'warning' }
                            ]
                        }
                    ],
                    outcomes: {
                        result_pass_antibody: {
                            status: 'pass',
                            title: 'âœ… ç¬¦åˆè¦å®š (æ†‘æŠ—é«”)',
                            desc: 'è«‹ç¹³äº¤ MMR æŠ—é«”é™½æ€§æª¢é©—å ±å‘Šã€‚'
                        },
                        result_pass_vax: {
                            status: 'pass',
                            title: 'âœ… ç¬¦åˆè¦å®š (æ†‘ç–«è‹—)',
                            desc: 'è«‹ç¹³äº¤ MMR ç–«è‹—æ¥ç¨®ç´€éŒ„è­‰æ˜ (å¦‚é»ƒå¡å½±æœ¬)ã€‚'
                        },
                        result_action: {
                            status: 'action',
                            title: 'ğŸ’‰ å»ºè­°è£œæ¥ç¨®æˆ–é©—æŠ—é«”',
                            desc: 'è‹¥ç„¡æŠ—é«”ä¹Ÿç„¡ç´€éŒ„ï¼Œè«‹é¸æ“‡ï¼š1. è‡³é†«é™¢è£œæ‰“ MMR ç–«è‹—ä¸¦ç¹³äº¤è­‰æ˜ (æœ€å¿«é€Ÿ) æˆ– 2. æŠ½è¡€æª¢é©—æŠ—é«” (è‹¥é™°æ€§ä»éœ€è£œæ‰“)ã€‚'
                        }
                    }
                },
                {
                    id: 'flu',
                    title: '4. æµæ„Ÿç–«è‹— (Influenza)',
                    icon: <Thermometer className="w-6 h-6 text-orange-600" />,
                    description: 'è¦å®šï¼šä¸€å¹´å…§æµæ„Ÿç–«è‹—æ³¨å°„æ¥ç¨®è­‰æ˜ã€‚',
                    color: 'bg-orange-50 border-orange-200',
                    logic: [
                        {
                            id: 'q1',
                            text: 'è«‹å•æ‚¨åœ¨ã€Œæœ€è¿‘ä¸€å¹´å…§ã€æ˜¯å¦æ¥ç¨®éæµæ„Ÿç–«è‹—ï¼Ÿ',
                            subtext: 'é€šå¸¸æ¯å¹´ 10 æœˆå¾Œé–‹å§‹æ–½æ‰“',
                            options: [
                                { label: 'æœ‰ï¼Œæˆ‘æœ‰æ¥ç¨®è­‰æ˜', next: 'result_pass', type: 'success' },
                                { label: 'æ²’æœ‰ / è¶…éä¸€å¹´', next: 'result_action', type: 'warning' }
                            ]
                        }
                    ],
                    outcomes: {
                        result_pass: {
                            status: 'pass',
                            title: 'âœ… ç¬¦åˆè¦å®š',
                            desc: 'è«‹å½±å°ä¸¦ç¹³äº¤ä¸€å¹´å…§çš„æµæ„Ÿç–«è‹—æ¥ç¨®è­‰æ˜ (å¦‚å¥ä¿å¡è²¼ç´™ã€é»ƒå¡ç´€éŒ„æˆ–è¨ºæ‰€è­‰æ˜)ã€‚'
                        },
                        result_action: {
                            status: 'action',
                            title: 'ğŸ’‰ å»ºè­°æ–½æ‰“ç–«è‹—',
                            desc: 'å»ºè­°æ‚¨è‡³é†«ç™‚é™¢æ‰€æ–½æ‰“æµæ„Ÿç–«è‹—ï¼Œä¸¦ç´¢å–æ¥ç¨®è­‰æ˜å½±æœ¬ç¹³äº¤ï¼Œä»¥æå‡å¯¦ç¿’æœŸé–“çš„ä¿è­·åŠ›ã€‚'
                        }
                    }
                },
                {
                    id: 'covid',
                    title: '5. COVID-19 ç–«è‹—',
                    icon: <QrCode className="w-6 h-6 text-indigo-600" />,
                    description: 'è¦å®šï¼šéœ€å‡ºç¤ºç–«è‹—æ¥ç¨®ç´€éŒ„ (é»ƒå¡/æ•¸ä½è­‰æ˜)ã€‚',
                    color: 'bg-indigo-50 border-indigo-200',
                    logic: [
                        {
                            id: 'q1',
                            text: 'è«‹å•æ‚¨æ˜¯å¦å·²å®Œæˆ COVID-19 ç–«è‹—åŸºç¤åŠ‘æ¥ç¨®ï¼Œæˆ–ä¾é†«é™¢è¦å®šå®Œæˆè¿½åŠ åŠ‘ï¼Ÿ',
                            subtext: 'è«‹ç¢ºèªå¯¦ç¿’é†«é™¢çš„å…·é«”åŠ‘æ¬¡è¦å®š',
                            options: [
                                { label: 'æ˜¯ï¼Œå·²å®Œæˆä¸¦æœ‰è­‰æ˜', next: 'result_pass', type: 'success' },
                                { label: 'å¦ / åŠ‘æ•¸ä¸è¶³', next: 'result_action', type: 'warning' }
                            ]
                        }
                    ],
                    outcomes: {
                        result_pass: {
                            status: 'pass',
                            title: 'âœ… ç¬¦åˆè¦å®š',
                            desc: 'è«‹æª¢é™„ä¸‹åˆ—ä»»ä¸€è­‰æ˜æ–‡ä»¶ (éœ€æ—¥æœŸæ¸…æ¥š)ï¼šç–«è‹—æ¥ç¨®ç´€éŒ„å¡ (å°é»ƒå¡) å½±æœ¬ã€å¥ä¿å¡å½±æœ¬ (å«è²¼ç´™)ã€å¥åº·è­·ç…§ (éœ€æœ‰æ—¥æœŸ) æˆ–ç–«è‹—æ³¨å°„è­‰æ˜æ›¸ã€‚'
                        },
                        result_action: {
                            status: 'action',
                            title: 'ğŸ’‰ éœ€è£œæ¥ç¨®æˆ–å¡«å¯«åŒæ„æ›¸',
                            desc: (
                                <span>
                                è‹¥æœªæ»¿ 3 åŠ‘ï¼Œè«‹ç›¡é€Ÿè‡³åˆç´„é™¢æ‰€å®Œæˆæ¥ç¨®ã€‚è‹¥å› æ•…ç„¡æ³•æ–½æ‰“ï¼Œè«‹è‡³
                                <a 
                                    href="https://web.mkc.edu.tw/Site/nurse?Sn=MBHiytlqYU%2fRcBhMM9mW3hjYrGZRd00%2ff8L3xHzbeAM%3d&%E5%AF%A6%E7%BF%92%E9%AB%94%E6%AA%A2%E8%A6%8F%E5%AE%9A" 
                                    target="_blank" 
                                    rel="noreferrer"
                                    className="text-blue-400 underline hover:text-blue-300 mx-1 font-bold"
                                    onClick={(e) => e.stopPropagation()}
                                >
                                    è­·ç†ç§‘ç¶²ç«™
                                </a>
                                è«‹å®¶é•·å¡«å¯«ã€Œæ‹’æ‰“COVID-19åŒæ„æ›¸ã€ã€‚
                                </span>
                            )
                        }
                    }
                },
                {
                    id: 'xray',
                    title: '6. èƒ¸éƒ¨ X å…‰ (Chest X-Ray)',
                    icon: <FileText className="w-6 h-6 text-purple-600" />,
                    description: 'è¦å®šï¼šä¸€å¹´å…§ä¹‹èƒ¸éƒ¨Xå…‰å ±å‘Šã€‚',
                    color: 'bg-purple-50 border-purple-200',
                    logic: [
                        {
                            id: 'q1',
                            text: 'è«‹å•æ‚¨æ˜¯å¦æœ‰ã€Œæœ€è¿‘ 1 å¹´å…§ã€çš„èƒ¸éƒ¨ X å…‰å ±å‘Šï¼Ÿ',
                            subtext: 'å ±å‘Šéœ€æœ‰é†«å¸«åˆ¤è®€çµæœ (ç„¡æ´»å‹•æ€§è‚ºçµæ ¸)',
                            options: [
                                { label: 'æœ‰ï¼Œä¸”å ±å‘Šçµæœæ­£å¸¸', next: 'result_pass', type: 'success' },
                                { label: 'æœ‰ï¼Œä½†å ±å‘Šç•°å¸¸', next: 'result_followup', type: 'warning' },
                                { label: 'æ²’æœ‰ï¼Œæˆ–æ˜¯è¶…é 1 å¹´', next: 'result_do_now', type: 'info' }
                            ]
                        }
                    ],
                    outcomes: {
                        result_pass: {
                            status: 'pass',
                            title: 'âœ… ç¬¦åˆè¦å®š',
                            desc: 'è«‹ç¹³äº¤ 1 å¹´å…§çš„ X å…‰å ±å‘Šå½±æœ¬ (éœ€æœ‰æ”¾å°„ç§‘é†«å¸«åˆ¤è®€çµæœ)ã€‚'
                        },
                        result_followup: {
                            status: 'pass',
                            title: 'âœ… è«‹ç¹³äº¤æª¢é©—å ±å‘Š',
                            desc: 'è«‹ç›´æ¥å½±å°ä¸¦ç¹³äº¤è©²ä»½ X å…‰å ±å‘Šå³å¯ã€‚'
                        },
                        result_do_now: {
                            status: 'test',
                            title: 'ğŸ—“ï¸ å°‡çµ±ä¸€å®‰æ’æª¢æŸ¥',
                            desc: 'å¯¦ç¿’çµ„æœƒçµ±ä¸€æ–¼å¯¦ç¿’å‰å®‰æ’èƒ¸éƒ¨ X å…‰æª¢æŸ¥ï¼Œè«‹ä¸ç”¨è‡ªè¡Œå‰å¾€é†«é™¢ï¼Œä¸¦ç•™æ„ç­ç´šç›¸é—œé€šçŸ¥ã€‚'
                        }
                    }
                }
            ];

            const handleCategorySelect = (category) => {
                setActiveCategory(category);
                setInteraction({
                    categoryId: category.id,
                    stepId: category.logic[0].id,
                    history: []
                });
            };

            const handleOptionClick = (option) => {
                if (activeCategory.outcomes[option.next]) {
                    setResults({
                        ...results,
                        [activeCategory.id]: activeCategory.outcomes[option.next]
                    });
                    setInteraction(null);
                    setActiveCategory(null);
                } else {
                    setInteraction({
                        ...interaction,
                        stepId: option.next,
                        history: [...interaction.history, option.label]
                    });
                }
            };

            const resetAll = () => {
                setResults({});
                setActiveCategory(null);
                setInteraction(null);
            };

            // Render Functions
            const renderHome = () => (
                <div className="space-y-6">
                    <div className="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                        <h2 className="text-xl font-bold text-slate-800 mb-2">ğŸ‘‹ é†«é™¢å¯¦ç¿’é«”æª¢æª¢æ ¸è¡¨</h2>
                        <p className="text-slate-600 mb-4">
                            è«‹ä¾ç…§ä¸‹æ–¹ 6 å¤§é …ç›®é€²è¡Œè‡ªæˆ‘æª¢æ ¸ï¼Œå®Œæˆå¾Œç³»çµ±å°‡å”åŠ©æ‚¨æ•´ç†ã€Œç¹³äº¤æ–‡ä»¶æ¸…å–®ã€ã€‚
                        </p>
                        <div className="flex items-start gap-2 bg-blue-50 text-blue-700 p-3 rounded-lg text-sm">
                            <Info className="w-5 h-5 flex-shrink-0 mt-0.5" />
                            <p>è³‡æ–™ä¾†æºï¼šä¾æ“šæœ€æ–°é†«é™¢å¯¦ç¿’é«”æª¢è¦å®šå½™æ•´ã€‚</p>
                        </div>
                    </div>

                    <div className="grid gap-4 md:grid-cols-2">
                        {categories.map((cat) => {
                            const result = results[cat.id];
                            return (
                                <div
                                    key={cat.id}
                                    onClick={() => handleCategorySelect(cat)}
                                    role="button"
                                    tabIndex={0}
                                    className={`cursor-pointer text-left p-5 rounded-xl border-2 transition-all relative overflow-hidden group
                                        ${result 
                                        ? 'border-slate-200 bg-slate-50 opacity-80' 
                                        : 'border-white bg-white hover:border-blue-300 shadow-sm hover:shadow-md'
                                        }`}
                                >
                                    <div className="flex items-start justify-between mb-2">
                                        <div className={`p-2 rounded-lg ${cat.color} group-hover:scale-110 transition-transform`}>
                                            {cat.icon}
                                        </div>
                                        {result && (
                                            <span className={`text-xs px-2 py-1 rounded-full font-bold flex items-center gap-1
                                                ${result.status === 'pass' ? 'bg-green-100 text-green-700' : 
                                                result.status === 'action' ? 'bg-amber-100 text-amber-700' : 'bg-blue-100 text-blue-700'}`}>
                                                {result.status === 'pass' ? <CheckCircle className="w-3 h-3"/> : <AlertCircle className="w-3 h-3"/>}
                                                åˆ¤å®šå®Œæˆ
                                            </span>
                                        )}
                                    </div>
                                    <h3 className="font-bold text-lg text-slate-800">{cat.title}</h3>
                                    <div className="text-sm text-slate-500 mt-1 line-clamp-2">
                                        {result ? result.desc : cat.description}
                                    </div>
                                </div>
                            );
                        })}
                    </div>

                    {Object.keys(results).length > 0 && (
                        <div className="mt-8 bg-slate-800 text-white p-6 rounded-xl shadow-lg">
                            <h3 className="text-lg font-bold mb-4 flex items-center gap-2">
                                <FileText className="w-5 h-5" />
                                æ‚¨çš„å€‹äººåŒ–ç¹³äº¤æ¸…å–®
                            </h3>
                            <div className="space-y-3">
                                {Object.keys(results).map(key => {
                                    const cat = categories.find(c => c.id === key);
                                    const res = results[key];
                                    return (
                                        <div key={key} className="flex gap-3 items-start bg-slate-700/50 p-3 rounded-lg">
                                            <div className="mt-1">
                                                {res.status === 'pass' ? <CheckCircle className="text-green-400 w-5 h-5"/> : 
                                                res.status === 'action' ? <Syringe className="text-amber-400 w-5 h-5"/> : 
                                                <Activity className="text-blue-400 w-5 h-5"/>}
                                            </div>
                                            <div>
                                                <span className="font-bold text-slate-200 block text-sm mb-1">{cat.title}</span>
                                                <div className="text-sm text-slate-300">{res.desc}</div>
                                            </div>
                                        </div>
                                    )
                                })}
                            </div>
                            <button 
                                onClick={resetAll}
                                className="mt-6 w-full py-2 bg-slate-600 hover:bg-slate-500 rounded-lg text-sm text-slate-200 flex items-center justify-center gap-2 transition-colors"
                            >
                                <RefreshCcw className="w-4 h-4" /> é‡æ–°é–‹å§‹ / æ¸…é™¤ç´€éŒ„
                            </button>
                        </div>
                    )}
                </div>
            );

            const renderInteraction = () => {
                const currentQ = activeCategory.logic.find(q => q.id === interaction.stepId);
                
                return (
                    <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-in">
                        <div className="bg-white w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden">
                            <div className={`p-4 ${activeCategory.color} flex items-center justify-between`}>
                                <div className="flex items-center gap-2">
                                    <div className="p-1 bg-white/50 rounded-lg">{activeCategory.icon}</div>
                                    <h3 className="font-bold text-slate-800">{activeCategory.title}</h3>
                                </div>
                                <button 
                                    onClick={() => setActiveCategory(null)}
                                    className="p-1 hover:bg-black/10 rounded-full transition-colors"
                                >
                                    âœ•
                                </button>
                            </div>
                            
                            <div className="p-6">
                                <div className="mb-6">
                                    <span className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 block">
                                        Question
                                    </span>
                                    <h4 className="text-xl font-bold text-slate-800 mb-2 leading-snug">
                                        {currentQ.text}
                                    </h4>
                                    {currentQ.subtext && (
                                        <p className="text-slate-500 text-sm bg-slate-50 p-2 rounded-lg inline-block">
                                            â„¹ï¸ {currentQ.subtext}
                                        </p>
                                    )}
                                </div>

                                <div className="space-y-3">
                                    {currentQ.options.map((opt, idx) => (
                                        <button
                                            key={idx}
                                            onClick={() => handleOptionClick(opt)}
                                            className="w-full text-left p-4 rounded-xl border border-slate-200 hover:border-blue-400 hover:bg-blue-50 transition-all flex items-center justify-between group"
                                        >
                                            <span className="text-slate-700 font-medium">{opt.label}</span>
                                            <ChevronRight className="w-5 h-5 text-slate-300 group-hover:text-blue-500" />
                                        </button>
                                    ))}
                                </div>
                            </div>
                            
                            <div className="p-4 bg-slate-50 text-xs text-center text-slate-400 border-t border-slate-100">
                                è­·ç†ç§‘å¯¦ç¿’çµ„ é—œå¿ƒæ‚¨
                            </div>
                        </div>
                    </div>
                );
            };

            return (
                <div className="min-h-screen bg-slate-100 font-sans text-slate-900 pb-10">
                    {/* Header */}
                    <header className="bg-white border-b border-slate-200 sticky top-0 z-10">
                        <div className="max-w-md mx-auto px-4 py-4 flex items-center justify-center">
                            <div className="flex items-center gap-2">
                                <div className="bg-blue-600 text-white p-2 rounded-lg">
                                    <Shield className="w-5 h-5" />
                                </div>
                                <h1 className="text-lg font-bold text-slate-800">æ–°ç”Ÿå¯¦ç¿’é«”æª¢å°èˆª</h1>
                            </div>
                        </div>
                    </header>

                    {/* Main Content */}
                    <main className="max-w-md mx-auto px-4 py-6">
                        {renderHome()}
                        {activeCategory && interaction && renderInteraction()}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<HealthCheckGuide />);
    </script>
</body>
</html>